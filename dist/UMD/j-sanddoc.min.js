/*!
 * 模块名称：j-sanddoc
 * 模块功能：前端富文本展示方案。从属于“简计划”。
   　　　　　Font-end rich text display plan. Belong to "Plan J".
 * 模块版本：5.0.0
 * 许可条款：LGPL-3.0
 * 所属作者：龙腾道 <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
 * 问题反馈：https://GitHub.com/LongTengDao/j-sanddoc/issues
 * 项目主页：https://GitHub.com/LongTengDao/j-sanddoc/
 */
(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).SandDoc=t()})(this,function(){"use strict";var e=function(){var e=/^https?:\/\/[^\/]+|/.exec(location.href)[0];return e?function(t){return 0===t.indexOf(e)}:function(){}}(),t=/^[a-z][a-z0-9\-+.]*:/i;function n(n){if("string"!=typeof n)return 0;if(""===n)return 3;switch(n.charAt(0)){case"/":case".":case"?":case"#":return 3}var r=n.indexOf(":");return-1===r?2:e(n.slice(0,r))?4:function(e){switch(e){case"https":case"http":case"ftps":case"ftp":case"mailto":case"news":case"gopher":case"data":return!0}}(n)||"about:blank"===n?1:t.test(n)?0:void 0}function r(e){for(var t=e.length;t--;){var r,o=e[t],i=o.href;switch(n(i)){case 0:return void o.removeAttribute("href");case 1:break;case 2:o.setAttribute("href","./"+i);case 3:case 4:r=!0}r?"_blank"!==o.target&&o.setAttribute("target","_parent"):o.setAttribute("target","_blank")}}function o(e){r(e.getElementsByTagName("a")),r(e.getElementsByTagName("area"))}var i=function(){var e=document.createElement("iframe");if("sandbox"in e)return e=null,"sandbox";e.setAttribute("security","restricted");var t=document.body||document.documentElement;t.appendChild(e);var n=e.contentWindow,r=n.document;r.open();var o=n.$dangerous={};return r.write("<script>$dangerous={}<\/script>"),o=n.$dangerous===o,n.$dangerous=null,r.close(),r=null,n=null,t.removeChild(e),t=null,o?(e=null,"security"):"srcdoc"in e?(e=null,"inDanger"):(e=null,"dangerous")}(),a="hidden"in document.createElement("a")?function(){}:function(){var e="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video".split(" "),t=e.length;function n(n){for(var r=t;r--;)n.createElement(e[r])}return n(document),n}();function c(e){for(var t=e.getElementsByTagName("from"),n=t.length;n--;){var r=t[n];r.parentNode.removeChild(r)}}function u(){var e=this.style;e.height="0",e.height=this.contentDocument.documentElement.scrollHeight+"px"}var l=function(){switch(i){case"sandbox":return function(e){var t=e.getAttribute("srcDoc");e.removeAttribute("srcDoc");var n=e.style;if(n.height="0",t){e.addEventListener("load",u);var r=e.contentDocument;r.open(),r.write(t),r.close(),o(r),n.height=r.documentElement.scrollHeight+"px"}};case"security":return function(e){var t=e.getAttribute("srcDoc");e.removeAttribute("srcDoc");var n=e.style;if(n.height="0",t){e.setAttribute("security","restricted");var r=e.contentWindow.document;e.attachEvent("onLoad",function(e,t,n){return function r(){e.detachEvent("onLoad",r),t.height="0",t.height=n.documentElement.scrollHeight+"px"}}(e,n,r)),r.open(),a(r),r.write(t),r.close(),c(r),n.height=r.documentElement.scrollHeight+"px"}};case"inDanger":return function(e){e.removeAttribute("srcDoc")};case"dangerous":return function(){}}}(),s="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-top-navigation";function d(e){var t=(e||window.event).target,n=t.style;n.height="0",n.height=t.contentDocument.documentElement.scrollHeight+"px"}var f={doc:{required:!0,validator:function(e){return"string"==typeof e}}},m=document.createElement("div");function p(){var e=this.$el;m.innerHTML='<iframe sandbox="'+s+'" width="100%" frameBorder="0" scrolling="no" marginWidth="0" marginHeight="0" style="height:0;"></iframe>';var t=this.$el=m.lastChild,n=e.parentNode;if(null!==n){n.replaceChild(t,e);var r=this.doc;if(""!==r){t.addEventListener("load",d);var i=t.contentDocument;i.open(),i.write(r),i.close(),o(i),t.style.height=i.documentElement.scrollHeight+"px"}}else m.removeChild(t)}var h={name:"j-sanddoc",props:f,inheritAttrs:!1,render:function(e){return e("iframe")},mounted:p,activated:p,watch:{doc:p}};function g(){var e=this.$el;m.innerHTML='<iframe security="restricted" width="100%" frameBorder="0" scrolling="no" marginWidth="0" marginHeight="0" style="height:0;"></iframe>';var t=this.$el=m.lastChild,n=e.parentNode;if(null!==n){n.replaceChild(t,e);var r=this.doc;if(""!==r){t.addEventListener("load",d);var o=t.contentDocument;o.open(),a(o),o.write(r),o.close(),c(o),t.style.height=o.documentElement.scrollHeight+"px"}}else m.removeChild(t)}var v={name:"j-sanddoc",props:f,inheritAttrs:!1,render:function(e){return e("iframe")},mounted:g,activated:g,watch:{doc:g}},y={name:"j-sanddoc",props:f,inheritAttrs:!1,render:function(e){return e("iframe",{staticStyle:{height:"0"},attrs:{width:"100%",frameBorder:"0",scrolling:"no",marginWidth:"0",marginHeight:"0"}})}},b=function(){switch(i){case"sandbox":return h;case"security":return v;default:return y}}();function w(e){var t,n;return!e.src&&!e.name&&!e.seamless&&(t=e.getAttribute("sandbox"))&&(t===s||4===(n=t.split(" ")).length&&n.sort().join(" ")===s)&&"100%"===e.getAttribute("width")&&"no"===e.getAttribute("scrolling")&&"0"===e.getAttribute("frameBorder")&&"0"===e.getAttribute("marginWidth")&&"0"===e.getAttribute("marginHeight")&&e.getAttribute("srcDoc")}function E(e){for(var t=function(e){for(var t=[],n=e.getElementsByTagName("iframe"),r=n.length;r--;){var o=n[r];w(o)&&t.push(o)}return t}(e),n=t.length;n--;)l(t[n])}function A(e,t){if("complete"===t.readyState)return e();if(t.addEventListener)return t.addEventListener("DOMContentLoaded",function r(){t.removeEventListener("DOMContentLoaded",r),e()},!1);if(window==top){var n=t.documentElement;if(n.doScroll)return void setTimeout(function r(){try{n.doScroll("left")}catch(t){return void setTimeout(r,0)}e()},0)}t.attachEvent("onreadystatechange",function o(){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",o),e())})}function O(e){e?"documentElement"in e?A(function(){E(e)},e):e.component("j-sanddoc",b):"function"==typeof window.Vue&&"function"==typeof window.Vue.component?window.Vue.component("j-sanddoc",b):A(function(){E(document)},document)}var j=void 0,x=Object.create||function(){var e;if(document.domain)try{n=new ActiveXObject("htmlfile")}catch(a){}if(n)n.write("<script><\/script>"),n.close(),e=n.parentWindow.Object.prototype;else{(n=document.createElement("iframe")).setAttribute("style","display:none !important;_display:none;");var t=document.body||document.documentElement;t.appendChild(n),n.src="javascript:",e=n.contentWindow.Object.prototype,t.removeChild(n)}var n=null;delete e.constructor,delete e.hasOwnProperty,delete e.isPrototypeOf,delete e.propertyIsEnumerable,delete e.toLocaleString,delete e.toString,delete e.valueOf;var r=function(){};r.prototype=e;var o=function(){};function i(t,n){if(n!==j)throw TypeError("CAN NOT defineProperties in ES 3 Object.create polyfill");if(null===t)return new r;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object prototype may only be an Object or null: "+t);o.prototype=t;var i=new o;return o.prototype=e,i}return function(e,t){return i(e,t)}}(),D=Object.prototype.hasOwnProperty,S="undefined"!=typeof Symbol?Symbol.toStringTag:undefined,C=Object.assign,L=Object.defineProperty,H=Object.freeze,T=Object.seal;return function(e,t){return function(e,t){if(t||(t=e,e=x(null)),C)C(e,t);else{for(var n in t)D.call(t,n)&&(e[n]=t[n]);if(!{toString:null}.propertyIsEnumerable("toString"))for(var r=["constructor","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","valueOf","toLocaleString","toString"];n=r.pop();)D.call(t,n)&&(e[n]=t[n])}if(e["default"]=e,T){if("function"==typeof e&&e.prototype&&T(e.prototype),S){var o=x(null);o.value="Module",L(e,S,o)}H(e)}return e}(e,t)}({version:"5.0.0",vue:b,render:l,install:O,_:"undefined"!=typeof module&&"object"==typeof exports||"function"==typeof define&&define.amd||O()})});
//# sourceMappingURL=j-sanddoc.min.js.map