/*!
 * 模块名称：j-sanddoc
 * 模块功能：前端富文本展示方案。从属于“简计划”。
   　　　　　Font-end rich text display plan. Belong to "Plan J".
 * 模块版本：6.0.0
 * 许可条款：LGPL-3.0
 * 所属作者：龙腾道 <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
 * 问题反馈：https://GitHub.com/LongTengDao/j-sanddoc/issues
 * 项目主页：https://GitHub.com/LongTengDao/j-sanddoc/
 */
(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SandDoc=e()})(this,function(){"use strict";function t(){}var e=function(){var e=/^https?:\/\/[^\/]+|/.exec(location.href)[0];return e?function(t){return 0===t.indexOf(e)}:t}(),n=/^[a-z][a-z0-9\-+.]*:/i;function r(t){if("string"!=typeof t)return 0;if(""===t)return 3;switch(t.charAt(0)){case"/":case".":case"?":case"#":return 3}var r=t.indexOf(":");return-1===r?2:e(t.slice(0,r))?4:function(t){switch(t){case"https":case"http":case"ftps":case"ftp":case"mailto":case"news":case"gopher":case"data":return!0}}(t)||"about:blank"===t?1:n.test(t)?0:void 0}function o(t){for(var e=t.length;e--;){var n,o=t[e],i=o.href;switch(r(i)){case 0:return void o.removeAttribute("href");case 1:break;case 2:o.setAttribute("href","./"+i),n=!0;break;case 3:case 4:n=!0}n?"_blank"!==o.target&&o.setAttribute("target","_parent"):o.setAttribute("target","_blank")}}function i(t){o(t.getElementsByTagName("a")),o(t.getElementsByTagName("area"))}var a=function(){var t=document.createElement("iframe");if("sandbox"in t)return t=null,"sandbox";t.setAttribute("security","restricted");var e=document.body||document.documentElement;e.appendChild(t);var n=t.contentWindow,r=n.document;r.open();var o=n.$dangerous={};return r.write("<script>$dangerous={}<\/script>"),o=n.$dangerous===o,n.$dangerous=null,r.close(),r=null,n=null,e.removeChild(t),e=null,o?(t=null,"security"):"srcdoc"in t?(t=null,"inDanger"):(t=null,"dangerous")}(),c="hidden"in document.createElement("a")?t:function(){var t="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video".split(" "),e=t.length;function n(n){for(var r=e;r--;)n.createElement(t[r])}return n(document),n}();function u(t){for(var e=t.getElementsByTagName("from"),n=e.length;n--;){var r=e[n];r.parentNode.removeChild(r)}}var s=function(){switch(a){case"sandbox":var e=function(){var t=this.style;t.setProperty("height","0","important"),t.setProperty("height",this.contentDocument.documentElement.scrollHeight+"px","important")};return function(t){var n=t.getAttribute("srcdoc");t.removeAttribute("srcdoc");var r=t.style;r.setProperty("height","0","important"),t.addEventListener("load",e);var o=t.contentDocument;o.open(),o.write(n),o.close(),i(o),r.height=o.documentElement.scrollHeight+"px"};case"security":return function(t){var e=t.getAttribute("srcdoc");t.removeAttribute("srcdoc");var n=t.style;n.height="0",t.setAttribute("security","restricted");var r=t.contentWindow.document;t.attachEvent("onload",function(t,e){return function(){t.height="0",t.height=e.documentElement.scrollHeight+"px"}}(n,r)),r.open(),c(r),r.write(e),r.close(),u(r),n.height=r.documentElement.scrollHeight+"px"};case"inDanger":return function(t){t.removeAttribute("srcdoc")};case"dangerous":return t}}(),l="j-sanddoc",d="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-top-navigation",f=Object.freeze,p=f&&function(){var e=Object.create;function n(t){var n=e(null);return n.value=t,n.enumerable=!0,n}function r(n){var r=e(null);return r.get=function(){return n},r.set=t,r.enumerable=!0,r}var o,s,p=f({validator:function(t){return null==t}}),m=f({srcdoc:f({required:!0,validator:function(t){return"string"==typeof t}}),src:p,sandbox:p,security:p}),h=f({height:"0!important"});if("sandbox"===a)o=function(t){return t("iframe",{staticStyle:h,attrs:f({sandbox:d,width:"100%",frameborder:"0",scrolling:"no",marginwidth:"0",marginheight:"0"}),nativeOn:g})},s=function(t,e,n){e.open(),e.write(n),e.close(),i(e),t.style.setProperty("height",e.documentElement.scrollHeight+"px","important")};else{if("security"!==a)return e(null,{name:r(l),props:r(m),inheritAttrs:n(!1),render:n(function(t){return t("iframe",{staticStyle:h,attrs:f({width:"100%",frameborder:"0",scrolling:"no",marginwidth:"0",marginheight:"0"})})}),methods:n(f({render:t}))});o=function(t){return t("iframe",{staticStyle:h,attrs:f({security:"restricted",width:"100%",frameborder:"0",scrolling:"no",marginwidth:"0",marginheight:"0"}),nativeOn:g})},s=function(t,e,n){e.open(),c(e),e.write(n),e.close(),u(e),t.style.setProperty("height",e.documentElement.scrollHeight+"px","important")}}var g=f({load:function(){var t=this.style;t.setProperty("height","0","important"),t.setProperty("height",this.contentDocument.documentElement.scrollHeight+"px","important")}}),v=n(function(){var t=this.$el,e=t.contentDocument;e&&s(t,e,this.srcdoc)});return e(null,{name:r(l),props:r(m),inheritAttrs:n(!1),render:n(o),mounted:v,activated:v,watch:n(f({srcdoc:function(t,e){if(t!==e){var n=this.$el;if(n){var r=n.contentDocument;r&&s(n,r,t)}}}})),methods:n(f({render:function(){var t=this.$el;s(t,t.contentDocument,this.srcdoc)}}))})}();function m(t){return!(!t.getAttribute("srcdoc")||!function(t){if(t){if(t===d)return!0;var e=t.split(" ");return 4===e.length&&e.sort().join(" ")===d}return!1}(t.getAttribute("sandbox")))&&(!t.src&&!t.name&&!t.seamless&&"100%"===t.getAttribute("width")&&"no"===t.getAttribute("scrolling")&&"0"===t.getAttribute("frameborder")&&"0"===t.getAttribute("marginwidth")&&"0"===t.getAttribute("marginheight"))}function h(t){for(var e=function(t){for(var e=[],n=t.length;n--;){var r=t[n];m(r)&&e.push(r)}return e}(t.document.getElementsByTagName("iframe")),n=e.length;n--;)s(e[n])}function g(t,e){var n=e.document;if("complete"===n.readyState)return t();if(n.addEventListener)return n.addEventListener("DOMContentLoaded",function o(){n.removeEventListener("DOMContentLoaded",o),t()},!1);if(e==top){var r=n.documentElement;if(r.doScroll)return void setTimeout(function e(){try{r.doScroll("left")}catch(n){return void setTimeout(e,0)}t()},0)}n.attachEvent("onreadystatechange",function i(){"complete"===n.readyState&&(n.detachEvent("onreadystatechange",i),t())})}function v(t){null==t?"function"==typeof(t=window.Vue)?t.component(l,p):g(function(){h(window)},window):"function"==typeof t?t.component(l,p):g(function(){h(t)},t)}var y=void 0,b=Object.create||function(){var t;if(document.domain)try{n=new ActiveXObject("htmlfile")}catch(a){}if(n)n.write("<script><\/script>"),n.close(),t=n.parentWindow.Object.prototype;else{(n=document.createElement("iframe")).setAttribute("style","display:none !important;_display:none;");var e=document.body||document.documentElement;e.appendChild(n),n.src="javascript:",t=n.contentWindow.Object.prototype,e.removeChild(n)}var n=null;delete t.constructor,delete t.hasOwnProperty,delete t.isPrototypeOf,delete t.propertyIsEnumerable,delete t.toLocaleString,delete t.toString,delete t.valueOf;var r=function(){};r.prototype=t;var o=function(){};function i(e,n){if(n!==y)throw TypeError("CAN NOT defineProperties in ES 3 Object.create polyfill");if(null===e)return new r;if("object"!=typeof e&&"function"!=typeof e)throw TypeError("Object prototype may only be an Object or null: "+e);o.prototype=e;var i=new o;return o.prototype=t,i}return function(t,e){return i(t,e)}}(),w=Object.prototype.hasOwnProperty,E="undefined"!=typeof Symbol?Symbol.toStringTag:undefined,O=Object.assign,A=Object.defineProperty,x=Object.freeze,j=Object.seal;return function(t,e){return function(t,e){if(e||(e=t,t=b(null)),O)O(t,e);else{for(var n in e)w.call(e,n)&&(t[n]=e[n]);if(!{toString:null}.propertyIsEnumerable("toString"))for(var r=["constructor","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","valueOf","toLocaleString","toString"];n=r.pop();)w.call(e,n)&&(t[n]=e[n])}if(t["default"]=t,j){if("function"==typeof t&&t.prototype&&j(t.prototype),E){var o=b(null);o.value="Module",A(t,E,o)}x(t)}return t}(t,e)}({version:"6.0.0",vue:p,render:s,install:v,_:"undefined"!=typeof module&&"object"==typeof exports||"function"==typeof define&&define.amd||v()})});
//# sourceMappingURL=j-sanddoc.min.js.map